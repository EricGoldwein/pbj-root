# Cursor Plan: Make PBJpedia Pages Mobile-Friendly

## Objective
Make all PBJpedia pages (overview, methodology, metrics, state-standards, non-nursing-staff, data-limitations, history) fully mobile-friendly while keeping the desktop version completely unchanged. The solution should use a single source of truth so content only needs to be edited once.

## Current State
- PBJpedia pages use a CSS Grid layout with a fixed 10em sidebar on the left and main content on the right
- Sidebar contains: logo, PBJpedia navigation menu, and PBJ320 portal links
- There's already a basic mobile media query at `@media screen and (max-width: 800px)` that stacks the layout, but it's not fully optimized
- Pages are generated by `generate_dynamic_pbjpedia_page()` and `pbjpedia_page()` route handler in `app.py`
- All content is in markdown files in `PBJPedia/` directory

## Requirements

### Must Have
1. **Desktop version must remain completely unchanged** - no modifications to desktop layout, styling, or behavior
2. **Single source of truth** - content should only exist once (in markdown files), not duplicated for mobile/desktop
3. **All text content must be accessible on mobile** - nothing should be hidden or removed
4. **Sidebar should be hidden or collapsed on mobile** - the fixed sidebar takes up too much space on small screens
5. **Mobile navigation should be accessible** - users need a way to navigate between PBJpedia pages on mobile
6. **Responsive breakpoint** - use `max-width: 800px` or similar to match existing pattern

### Should Have
1. **Mobile menu/hamburger** - consider adding a collapsible menu button for navigation on mobile
2. **Touch-friendly targets** - ensure buttons/links are large enough for touch (minimum 44x44px)
3. **Readable text** - ensure font sizes are appropriate for mobile reading
4. **Proper spacing** - adequate padding/margins for mobile viewing
5. **Tables should be scrollable** - if any tables exist, they should scroll horizontally on mobile

### Nice to Have
1. **Sticky mobile header** - consider a sticky header with logo and menu button on mobile
2. **Smooth transitions** - animations for menu open/close
3. **Accessibility** - proper ARIA labels for mobile menu

## Technical Approach

### Recommended Solution
1. **Use CSS-only approach with media queries** - modify existing CSS in `generate_dynamic_pbjpedia_page()` and `pbjpedia_page()` functions
2. **Hide sidebar on mobile** - use `display: none` or `visibility: hidden` for `#mw-navigation` on mobile
3. **Add mobile menu** - create a hamburger menu button that shows/hides navigation on mobile
4. **Keep same HTML structure** - don't duplicate HTML, just change CSS behavior
5. **Ensure content area uses full width on mobile** - adjust grid layout to single column on mobile

### Implementation Strategy
1. Enhance the existing `@media screen and (max-width: 800px)` block in both page generation functions
2. Add mobile menu toggle button (hamburger icon) that appears only on mobile
3. Make sidebar collapsible/hidden on mobile with JavaScript for menu toggle
4. Ensure main content area (`#mw-body` or `.mw-body`) takes full width on mobile
5. Test on multiple screen sizes (320px, 375px, 414px, 768px)

## Files to Modify
- `app.py` - functions: `generate_dynamic_pbjpedia_page()` and `pbjpedia_page()`
  - Look for existing mobile CSS around lines 1615-1645 and 2627-2645
  - Add mobile menu HTML and JavaScript
  - Enhance mobile CSS

## Testing Checklist
- [ ] Desktop version unchanged (test at 1920px, 1440px, 1280px)
- [ ] Mobile layout works at 320px, 375px, 414px widths
- [ ] Sidebar is hidden/collapsed on mobile
- [ ] Mobile menu is accessible and functional
- [ ] All text content is readable on mobile
- [ ] Navigation works on mobile
- [ ] Tables (if any) scroll horizontally on mobile
- [ ] Touch targets are adequate size
- [ ] No horizontal scrolling on mobile (except for tables)

## Constraints
- Do NOT modify markdown files in `PBJPedia/` directory
- Do NOT create separate mobile/desktop HTML templates
- Do NOT duplicate content
- Do NOT change desktop styling or layout
- Keep existing CSS Grid structure for desktop

## Success Criteria
1. PBJpedia pages are fully usable on mobile devices (320px+ width)
2. Desktop version is identical to current version
3. Content can be edited in one place (markdown files) and works on both mobile and desktop
4. Navigation is accessible on mobile
5. No content is lost or hidden on mobile
